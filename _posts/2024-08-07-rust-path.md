---
title: Rust æ–‡ä»¶ç³»ç»Ÿè·¯å¾„
date: 2024-08-07 16:46:00 -0400
categories: [å­¦ä¹ ç¬”è®°, Rust]
tags: [rust, filepath]
description: æœ¬æ–‡ç”Ÿæˆè‡ª ChatGPT Rust æ¨¡å‹ï¼ˆåˆ›å»ºè€… Widenexï¼‰ï¼Œå¹¶ä½œäº†éƒ¨åˆ†ä¿®æ”¹
---

`std::path` æ¨¡å—åœ¨ Rust ä¸­ç”¨äºå¤„ç†æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ã€‚è¯¥æ¨¡å—æä¾›äº†ä¸¤ä¸ªä¸»è¦çš„ç±»å‹ï¼š`Path` å’Œ `PathBuf`ï¼Œåˆ†åˆ«ç”¨äº **ä¸å¯å˜** å’Œ **å¯å˜** è·¯å¾„ã€‚ä¸‹é¢æ˜¯å¯¹ `std::path` æ¨¡å—çš„å…¥é—¨ä»‹ç»ï¼ŒåŒ…æ‹¬åŸºæœ¬ç”¨æ³•å’Œå¸¸è§æ“ä½œç¤ºä¾‹ã€‚

## åŸºæœ¬ç±»å‹

`Path`ï¼šè¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿè·¯å¾„çš„ä¸å¯å˜è§†å›¾ã€‚`Path` ç±»å‹æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œç±»ä¼¼äº `&str`ã€‚
`PathBuf`ï¼šè¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿè·¯å¾„çš„å¯å˜ã€æ‹¥æœ‰æ‰€æœ‰æƒçš„å­—ç¬¦ä¸²ã€‚ç±»ä¼¼äº `String`ã€‚

## åˆ›å»ºè·¯å¾„

ä½ å¯ä»¥ä½¿ç”¨ `Path` å’Œ `PathBuf` æ¥åˆ›å»ºå’Œæ“ä½œè·¯å¾„ã€‚é€šå¸¸ï¼Œ`Path` ç”¨äº **åªè¯»æ“ä½œ**ï¼Œè€Œ `PathBuf` ç”¨äº **éœ€è¦ä¿®æ”¹è·¯å¾„çš„æ“ä½œ**ã€‚

```rust
use std::path::{Path, PathBuf};

fn main() {
    // ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡åˆ›å»ºä¸€ä¸ªä¸å¯å˜è·¯å¾„
    let path = Path::new("/some/path/to/file.txt");

    // ä½¿ç”¨ PathBuf åˆ›å»ºä¸€ä¸ªå¯å˜è·¯å¾„
    let mut path_buf = PathBuf::from("/some/path/to");
    path_buf.push("file.txt");

    println!("Path: {:?}", path);
    println!("PathBuf: {:?}", path_buf);
}
```

```terminal
Path: "/some/path/to/file.txt"
PathBuf: "/some/path/to\\file.txt"
```

## åŸºæœ¬æ“ä½œ

### æ‹¼æ¥è·¯å¾„

ä½ å¯ä»¥ä½¿ç”¨ `push` æ–¹æ³•åœ¨ `PathBuf` ä¸Šæ‹¼æ¥è·¯å¾„ã€‚

```rust
use std::path::PathBuf;

fn main() {
    let mut path = PathBuf::from("/some/path");
    path.push("to");
    path.push("file.txt");

    println!("Path: {:?}", path);
}
```

```terminal
Path: "/some/path\\to\\file.txt"
```

> `push` åœ¨åŸæ¥çš„åŸºç¡€ä¸Šæ·»åŠ è·¯å¾„ï¼Œ`join` åˆ™æ˜¯è¿”å›æ–°çš„è·¯å¾„ã€‚
{: .prompt-tip}

### è·å–è·¯å¾„çš„å„ä¸ªéƒ¨åˆ†

ä½ å¯ä»¥ä½¿ç”¨ `Path` æä¾›çš„å„ç§æ–¹æ³•æ¥è·å–è·¯å¾„çš„ä¸åŒéƒ¨åˆ†ï¼Œä¾‹å¦‚æ–‡ä»¶åã€çˆ¶ç›®å½•ã€æ‰©å±•åç­‰ã€‚

```rust
use std::path::Path;

fn main() {
    let path = Path::new("/some/path/to/file.txt");

    println!("File name: {:?}", path.file_name());
    println!("Extension: {:?}", path.extension());
    println!("Parent: {:?}", path.parent());
}
```

```terminal
File name: Some("file.txt")
Extension: Some("txt")
Parent: Some("/some/path/to")
```

### éå†è·¯å¾„ç»„ä»¶

ä½ å¯ä»¥éå†è·¯å¾„çš„å„ä¸ªç»„ä»¶ï¼Œä¾‹å¦‚ç›®å½•ã€æ–‡ä»¶åç­‰ã€‚

```rust
use std::path::Path;

fn main() {
    let path = Path::new("/some/path/to/file.txt");

    for component in path.components() {
        println!("{:?}", component);
    }
}
```

```terminal
RootDir
Normal("some")
Normal("path")
Normal("to")
Normal("file.txt")
```

### è½¬æ¢ä¸ºå­—ç¬¦ä¸²

ä½ å¯ä»¥å°†è·¯å¾„è½¬æ¢ä¸ºå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²åˆ‡ç‰‡ã€‚

```rust
use std::path::Path;

fn main() {
    let path = Path::new("/some/path/to/file.txt");

    // è½¬æ¢ä¸º &str
    if let Some(path_str) = path.to_str() {
        println!("Path as &str: {}", path_str);
    }

    // è½¬æ¢ä¸º String
    let path_string = path.to_string_lossy();
    println!("Path as String: {}", path_string);
}
```

```terminal
Path as &str: /some/path/to/file.txt
Path as String: /some/path/to/file.txt
```

### æ£€æŸ¥è·¯å¾„å±æ€§

ä½ å¯ä»¥æ£€æŸ¥è·¯å¾„çš„å±æ€§ï¼Œä¾‹å¦‚æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„ï¼Œæ˜¯å¦æ˜¯æ–‡ä»¶æˆ–ç›®å½•ç­‰ã€‚

```rust
use std::path::Path;

fn main() {
    let path = Path::new("/some/path/to/file.txt");

    println!("Is absolute: {}", path.is_absolute());
    println!("Is relative: {}", path.is_relative());
}
```

```terminal
Is absolute: false
Is relative: true
```

## ç¤ºä¾‹ï¼šåˆå¹¶è·¯å¾„å’Œæ‰©å±•å

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Path å’Œ PathBuf åˆå¹¶è·¯å¾„å¹¶ä¿®æ”¹æ‰©å±•åã€‚

```rust
use std::path::{Path, PathBuf};

fn main() {
    let path = Path::new("/some/path/to/file");

    // åˆ›å»ºä¸€ä¸ªæ–°çš„è·¯å¾„ï¼Œæ·»åŠ æ‰©å±•å
    let mut new_path = PathBuf::from(path);
    new_path.set_extension("txt");

    println!("Original path: {:?}", path);
    println!("New path: {:?}", new_path);
}
```

```terminal
Original path: "/some/path/to/file"
New path: "/some/path/to/file.txt"
```

## æ€»ç»“

`std::path` æ¨¡å—æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½æ¥å¤„ç†æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼Œæ— è®ºæ˜¯ç®€å•çš„è·¯å¾„æ‹¼æ¥è¿˜æ˜¯å¤æ‚çš„è·¯å¾„æ“ä½œéƒ½èƒ½è½»æ¾å®ç°ã€‚é€šè¿‡ `Path` å’Œ `PathBuf` ç±»å‹ï¼Œä½ å¯ä»¥ç¼–å†™å¥å£®ä¸”æ˜“äºç»´æŠ¤çš„è·¯å¾„æ“ä½œä»£ç ã€‚ğŸ’¡
